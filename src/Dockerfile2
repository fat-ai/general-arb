# Use a lightweight Python base image
FROM python:3.11-slim

# Prevent Python from buffering stdout/stderr (so you see logs instantly)
ENV PYTHONUNBUFFERED=1

# Install system dependencies (sometimes needed for pyarrow/numpy/scipy)
# usually not strictly necessary for binary wheels, but good for safety
RUN apt-get update && apt-get install -y --no-install-recommends \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /app

# Install Python libraries
# We include pyarrow because Polars/Pandas Parquet support relies on it
RUN pip install --no-cache-dir \
    polars \
    pandas \
    numpy \
    scipy \
    statsmodels \
    pyarrow

# We do NOT copy the data files here. We will mount them at runtime.
# This keeps the image small and build times fast.

# Default command
CMD ["python", "fresh_wallet_calibration.py"]
